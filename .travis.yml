language: java
dist: trusty
addons:
  sonarcloud:
    organization: antop-dev-github
jdk:
  - openjdk8
branches:
  only:
    - master
cache:
  directories:
    - "$HOME/.m2"
before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
install:
  - mvn test-compile -DskipTests=true -Dmaven.javadoc.skip=true -B -V
script:
  - mvn clean package jacoco:report
after_success:
  - mvn sonar:sonar -Dsonar.host.url=$SONAR_HOST_URL -Dsonar.projectKey=$SONAR_PROJECT_KEY
  - mvn coveralls:report -DrepoToken=$COVERALLS_REPO_TOKEN
notifications:
  email: false
  slack:
    on_success: always
    on_failure: always
    on_pull_requests: true
    rooms:
      secure: PzCmHp6IGdFMaJKuE9iFg+JCiLg9PX58zQH6dLtBob4sigIEy3v4mczpWdkFT5PpBrA8O5SH1SaOZdsUbMMck03s2p7cz1btSKwup6htmiAfnG2lAio1xiBemPrWnduEdBaoh3j3AfdhBH30pkaIJzIRbCIyyjGKbKIJTH5Dbxt2xmyOc/C0YmA4+V1IMYzICnbRBpK2nzn/yBKSyJCrMgqrMMR5kAAs2Hw8mTv1fj090F5YQ9D6r3siUb53U86h5aw+GoFdROFK4h7tbQTxAAntYOl2APLfGgAAg6L4TNOi3Lcbqs8yMNyjqQcPY4fYigrzBEPG1FBjqasl/DYsxJlSzjfss5tQ2Gnh7ftduBy2jFM0b5ngOvZafS2pMPDNRyNdktDR4FeDxFfQzfVQxDxox8rq/dPfZEf6wR1GmTOxbQe/BP9neK9Tt/fR0Kvc1gxwm2nt1Ur7HgiIRuzZyeTGAgvUMHTFE/85nnlxjug+Zy+san2EBgtPAWBI+HC9Db9UAM+plICIYGp7ll58L92NnF2MYXmmdRIORG+bmvAKfleiX2QaTZ1MR9zWvaWFqxCkw6rSSXHGLaF9H/a89/zPjw1GiUxXIf9BFMDaELG8eMqfdkGoCEKlpuLfFQ5pyN1GwV7FFAak5XU1+IHd1moW/OhxQIKirCHMfSWfV4Q=