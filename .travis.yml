language: java
dist: trusty
addons:
  sonarcloud:
    organization: antop-dev-github
jdk:
  - openjdk8
branches:
  only:
    - master
cache:
  directories:
    - "$HOME/.m2"
before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
install:
  - mvn test-compile -DskipTests=true -Dmaven.javadoc.skip=true -B -V
script:
  - mvn clean package jacoco:report
after_success:
  - mvn sonar:sonar -Dsonar.host.url=$SONAR_HOST_URL -Dsonar.projectKey=$SONAR_PROJECT_KEY
  - mvn coveralls:report -DrepoToken=$COVERALLS_REPO_TOKEN
notifications:
  email: false
  slack:
    secure: pRMY7Eb83H0XxhVg4cemkwnjDVuJA1Ed8imGyDksg03FMLOGe1QoX/CyKlVq3GuPJ/xSpLWFcv9vwRE5WE2eJbb+OkMhwwXfV3uFxbawropNzT47/ViBcTG2CV1rr7a2XKavHVM5FkgT+RrBtmk+8+Wze4i0jvjKh9hrHuRM9Fx6YbupHL2zmt/xmw/8tiZlVF7TVcEtXAZCgPuBnJh+OTKJ1wRV8pPIvpZM3bFhI8MetI3uR5aY5WB/Idw7OwDNgTf64iP8LycMeBFNSsNF1iLqykIq8u+OhjuuMJVYBtVFs00TW5RMcPksf4hm+fd8PQhMTNQOE07oJy+IcgdZ79GnYiMAt4Q0FVZIjTPBAuYiPlO64lTOY5FdenqyLByz2qDfsiIm7TYUsji0+d0osE5nzyoR68weTHsZZ7+CqisOx5WF5r43Owo3HyTDhJBYVeTIpJjmBqIVbWNfZNeJpkK0jp58yIaUQZDdEJar7FhgwiPLLe8qxrMUKFGukZFgvdLe4Y06/uvWclRNk8szCVD1W/hdj60STs0NZFxwwjLCErVEuZ0B+/vO808wgswt0sCDXt3VCw9gWOYNjdVFVY9ANol78lHGm211YOp0C9eoCSKC/VnHFkLrcxckEFF7jRnnnoy2wzlXnvp0svCGGa9HcC8U+0s2F7ZYWnBqAEw=
