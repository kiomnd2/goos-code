language: java
dist: trusty
addons:
  sonarcloud:
    organization: antop-dev-github
jdk:
  - openjdk8
branches:
  only:
    - master
cache:
  directories:
    - "$HOME/.m2"
before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
install:
  - mvn test-compile -DskipTests=true -Dmaven.javadoc.skip=true -B -V
script:
  - mvn clean package jacoco:report
after_success:
  - mvn sonar:sonar -Dsonar.host.url=$SONAR_HOST_URL -Dsonar.projectKey=$SONAR_PROJECT_KEY
  - mvn coveralls:report -DrepoToken=$COVERALLS_REPO_TOKEN
notifications:
  email: false
  slack:
    secure: "GnSRDrvqnXJZCK732mE/cx2rGU/8/dv5vNKMOHiRuNqF9DCizjaYUYXVe2+WjN+C4masZzXsAB3pmTtTNcR5gbdvRtw88pMhY6nXo2e2T6mHLJjr+gFf6rV2sORtZhX7EJ+T7vrh1U8RlDPuyQfPzLvkzgU/tlUmpG/N/wGxfL6jDvhor1PGEz1D/FMu9K/NWYSc20HOl5/J30DcSBe5kLPl/jfdroK09eWMtlAGeOSjJHtSvVlsAtS1no4Ob7RwUPSoRCu59fOk5BDL51hf2LqQP/ioIX6J7rozAIpCrkcRRec40zUVS3pwsu7lk70YbJQ2/PTkgx/KGoeiYxlbY32RxS+e/F740KNMdGrQ/A1xLrWBhwC8j1LCHoWZzFV02OVzfMju7M/cdHZkrDDGOoZGzPq32RLCpQ3NjinqZ8GFuNrBeMMuAYSbUoWrWwA9YKJtY/ujvw4ZxprM0TYE4KcoFOeJexQz+nDQAO6MZhN8xtUuKygfuXDVfJGZd/o5W1/WuvRRbH3HxFsxNCrAyphcJWjXYE81OcaDroITd7IbALhmz7tmohGn1rPvUFZ7goI3UCyyrs1PyKeIIGb8jvLgqEnixLIui3r8OvAX9XKcIhtmeHnvVOcrUt0tfyKKLPXK3yxXVZD6Qack7hj2ahHoU/prKG5m35wK3Zzc7uU="
