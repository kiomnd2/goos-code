language: java
dist: trusty
addons:
  sonarcloud:
    organization: antop-dev-github
jdk:
  - openjdk8
branches:
  only:
    - master
cache:
  directories:
    - "$HOME/.m2"
before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
install:
  - mvn test-compile -DskipTests=true -Dmaven.javadoc.skip=true -B -V
script:
  - mvn clean package jacoco:report
after_success:
  - mvn sonar:sonar -Dsonar.host.url=$SONAR_HOST_URL -Dsonar.projectKey=$SONAR_PROJECT_KEY
  - mvn coveralls:report -DrepoToken=$COVERALLS_REPO_TOKEN
notifications:
  email: false
  slack:
    secure: lyf1O1V80W0tm1PwF3jX4uOtOwvmz2jxhsiSuINFdY8mZcTmSpM9dO/L1mqGIrFLt84TnL46cOfDjF8bq589hjgaDHLbZvb+ElRBLYHPb7K3Yq6tk3mCpR6oxe5Ijb7jlJtV/lyeqSz8B7g2D0upfUDy07axQ2inGvC15ne8CCjeOcFrYGRNNRke+jlm2fmsmZks0ff9ucyK8nynoac+ztNjUX8cVT9w2mvf7ZellxNc+JrPQlnUw4xsgBdyju3Ceekqu2zkQlfBabjgerHOzcBtvkQr+pPcheGYX7+p9oqBAe0GgECdJclTISVQ3HGN8M3PPoD2uJlFBtkbszpTNZTLEAUOB0HjUXcuVphRLlZkoAaTir8a3O1w07/7ZjyeZ3RIep0vP+y2MVzWj9eG2BB4i3y1mQ+KtX/ISQhExv5Dy371L5MPMAoaSoP3IOVuzmDLtCmxvZK7S9oE/lhOAn6c19DnF4IXwkflZtFcGRPt0MsNUPIrbpfKkI5+4OvJSbgPCrCupQwG2L6C50pm6kpJNHpF2IKwzpz1K4HWX2atM7Qf5n9VQPb0XWd007mirPL3txnxibypJZWOp7XU5hlHf3MO2JZckktORF4BE5EEGLQQFT5hRXbYK1IEkZ/SUmqEEJvwFHp1MxUwb27mmxGQmggQdGLARJqLtlQBLmA=
